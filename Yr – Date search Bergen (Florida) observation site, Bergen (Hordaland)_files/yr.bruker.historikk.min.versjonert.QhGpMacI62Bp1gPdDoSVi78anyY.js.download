(function(){var t,r,e,i;i=yr.logg,null==window.yr.bruker&&(window.yr.bruker={}),null==window.yr.bruker.historikk&&(window.yr.bruker.historikk={}),e=window.yr.bruker.historikk,t=function(){function t(){}return t.les=function(t){var r,e,i,n,o,s;for(n=new RegExp(" *"+t+"=(.*)"),e=document.cookie.split(";"),o=0,s=e.length;s>o;o++)if(r=e[o],i=n.exec(r),null!=i)return i[1];return""},t.sett=function(t,r,e){var i,n,o;return n=new Date,n.setDate(n.getDate()+e),o=n.toUTCString(),i=""+t+"="+r+"; expires="+o+"; path=/",document.cookie=i},t}(),r=function(){function r(){this.maksAntallFavoritter=20,this.maksAntallSistBesoekte=12,this.antallDagerCookie=5e3,this.favoritter=this.strengTilIdliste(t.les("fav")),this.siste=this.strengTilIdliste(t.les("siste"))}return r.prototype.idlisteTilStreng=function(t){return t.join("|")},r.prototype.strengTilIdliste=function(t){return null!=t&&""!==t?t.split("|"):[]},r.prototype.lagreSiste=function(){var r;return r=this.idlisteTilStreng(this.siste),t.sett("siste",r,this.antallDagerCookie)},r.prototype.lagreFavoritter=function(){var r;return r=this.idlisteTilStreng(this.favoritter),t.sett("fav",r,this.antallDagerCookie)},r.prototype.toppsteder=function(t){return this.favoritter.concat(this.siste).slice(0,+(t-1)+1||9e9)},r.prototype.loggBesoek=function(t){return this.erFavoritt(t)?!1:this.siste[0]===t?!1:(this.siste=_(this.siste).without(t),this.siste.splice(0,0,t),this.siste=this.siste.slice(0,+(this.maksAntallSistBesoekte-1)+1||9e9),this.lagreSiste(),!0)},r.prototype.erISiste=function(t){return _(this.siste).contains(t)},r.prototype.erFavoritt=function(t){return _(this.favoritter).contains(t)},r.prototype.registrerFavoritt=function(t){return this.erFavoritt(t)||(this.favoritter.push(t),this.lagreFavoritter()),this.erISiste(t)?(this.siste=_(this.siste).without(t),this.lagreSiste()):void 0},r.prototype.avregistrerFavoritt=function(t){return this.erFavoritt(t)?(this.favoritter=_(this.favoritter).without(t),this.lagreFavoritter()):void 0},r.prototype.flyttFavoritt=function(t,r,e){var i,n;return i=r+e,0>i||i>this.favoritter.length-1?void 0:((-1===e||(e=1))&&(n=this.favoritter[i],this.favoritter[i]=this.favoritter[r],this.favoritter[r]=n),this.lagreFavoritter())},r}(),e.Historikk=r}).call(this),function(){var t,r,e,i,n,o,s,a,u,c={}.hasOwnProperty,l=function(t,r){function e(){this.constructor=t}for(var i in r)c.call(r,i)&&(t[i]=r[i]);return e.prototype=r.prototype,t.prototype=new e,t.__super__=r.prototype,t};u=window.yr.bruker.historikk,e=function(){function t(t){this.id=t}return t.harLocalStorage=function(){return null!=window.localStorage},t.prototype.les=function(){return window.localStorage.getItem(this.id)},t.prototype.slett=function(){return t.harLocalStorage()?window.localStorage.removeItem(this.id):void 0},t.prototype.lagre=function(t){return window.localStorage.setItem(this.id,t)},t.prototype.hent=function(r,e){var i,n;return n=function(t){return $.ajax({url:r,context:document.body,cache:!1,success:function(r){return t(r)}})},t.harLocalStorage()?(i=this.les(),null!=i?e(i):n(function(t){return function(r){return t.lagre(r),e(r)}}(this))):n(e)},t}(),a=function(t){function r(){r.__super__.constructor.call(this,"venstremeny")}return l(r,t),r.prototype.hent=function(t){var e;return e=yr.kontekst.approt+"/mine_stader/websvc/venstremeny.aspx",r.__super__.hent.call(this,e,t)},r}(e),r=function(){function t(){}return t.trid=function(t){return t.closest("tr").attr("id").substring(5)},t.init=function(){var t;return t=yr.kontekst.approt+"/mine_stader/websvc/forsideliste.aspx",$.ajax({url:t,context:document.body,cache:!1,success:function(){return function(t){return $("#mine-steder").html(t)}}(this)})},t}(),t=function(){function t(){}return t.init=function(){var t;return t=new a,t.hent(function(t){return $(".yr-stickynav-list").html(t),yr.gui.stickynav()})},t}(),s=function(){function t(){var r,e;this.hist=new u.Historikk,e=new a,this.hist.loggBesoek(yr.kontekst.node.id)&&e.slett(),e.hent(function(t){return $(".yr-stickynav-list").html(t),yr.gui.stickynav()}),$("#settFavoritt").click(t.settFavoritt),$("#fjernFavoritt").click(t.fjernFavoritt),r=this.hist.erFavoritt(yr.kontekst.node.id),t.settKnappestatus(r)}return t.settKnappestatus=function(t){return t?($("#settFavoritt").hide(),$("#fjernFavoritt").show()):($("#settFavoritt").show(),$("#fjernFavoritt").hide())},t.settFavoritt=function(){var r;return $("#settFavoritt").hasClass("yr-disabled")?!1:(t.settKnappestatus(!0),r=new u.Historikk,r.registrerFavoritt(yr.kontekst.node.id),(new a).slett(),!1)},t.fjernFavoritt=function(){var r;return t.settKnappestatus(!1),r=new u.Historikk,r.avregistrerFavoritt(yr.kontekst.node.id),(new a).slett(),!1},t}(),o=function(){function t(){}return t.init=function(){var t;return t=yr.kontekst.approt+"/mine_stader/websvc/time_for_time.aspx",$.ajax({url:t,context:document.body,cache:!1,success:function(t){return $(".yr-content-body").append(t)}})},t}(),i=function(){function t(){}return t.init=function(){var t;return t=yr.kontekst.approt+"/mine_stader/websvc/langtidsvarsel.aspx?",$.ajax({url:t,context:document.body,cache:!1,success:function(t){return $(".yr-content-body").append(t)}})},t}(),n=function(){function t(){}return t.trid=function(t){return t.closest("tr").attr("id").substring(5)},t.init=function(){var r;return r=yr.kontekst.approt+"/mine_stader/websvc/oversikt.aspx",$.ajax({url:r,context:document.body,cache:!1,success:function(r){var e;return e=$(".yr-table"),e.length>0&&e.remove(),$(".yr-content-body").append(r),$(".yr-table .icon").each(function(){return $(this).prepend("<ins></ins>")}),t.initKnapper()}})},t.initKnapper=function(){var r,e;return r=$(".yr-table tbody tr").length,e=0,$(".yr-table tbody tr").each(function(){var i,n;return n=$(this).attr("id").substring(5),$(".icon-arrow-up",this).hide(),$(".icon-arrow-down",this).hide(),$("th a",this).append(" ?"),i=e,e>0&&$(".icon-arrow-up",this).show().click(function(){return(new u.Historikk).flyttFavoritt(n,i,-1),(new a).slett(),t.init(),!1}),r-1>e&&$(".icon-arrow-down",this).show().click(function(){return(new u.Historikk).flyttFavoritt(n,i,1),(new a).slett(),t.init(),!1}),$(".icon-delete",this).click(function(){return(new u.Historikk).avregistrerFavoritt(n),(new a).slett(),t.init(),!1}),e++})},t}(),u.visning={Forsida:r,AnnenSide:t,Punktside:s,MineStederTimeForTime:o,MineStederLangtidsvarsel:i,MineStederOversikt:n,VenstremenyLocalStorageCache:a}}.call(this);